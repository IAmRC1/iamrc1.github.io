@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  color-scheme: light;

  /* Theme tokens (set by ThemeControls / ThemeInitScript) */
  --app-primary: 255 182 185; /* #FFB6B9 */
  --app-secondary: 250 227 217; /* #FAE3D9 */

  /* Semantic tokens derived from palette */
  --app-heading-color: rgb(var(--app-primary));
  --app-text-color: rgb(var(--app-secondary));

  --app-font-primary: var(--font-plus-jakarta, ui-sans-serif);
  --app-font-secondary: var(--font-newsreader, ui-serif);
}

html.dark {
  color-scheme: dark;

  /* Readability-first on dark backgrounds: fallback to zinc neutrals. */
  --app-heading-color: rgb(250 250 250); /* zinc-50 */
  --app-text-color: rgb(212 212 216); /* zinc-300 */
}

html {
  scroll-behavior: smooth;
}

body {
  font-family: var(--app-font-primary), ui-sans-serif, system-ui, -apple-system,
    Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  color: var(--app-text-color);
  @apply bg-white antialiased dark:bg-zinc-950;
}

@layer base {
  h1,
  h2,
  h3,
  h4 {
    font-family: var(--app-font-secondary), ui-serif, Georgia, Cambria,
      "Times New Roman", Times, serif;
    color: var(--app-heading-color);
  }
}

::selection {
  background-color: rgb(var(--app-primary));
  color: white;
}

@layer components {
  [data-reveal][data-state="hidden"] {
    opacity: 0;
    transform: translateY(10px);
    filter: blur(1px);
  }

  [data-reveal][data-state="shown"] {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
    transition: opacity 700ms ease, transform 700ms cubic-bezier(0.2, 0.8, 0.2, 1), filter 700ms ease;
  }

  @media (prefers-reduced-motion: reduce) {
    [data-reveal][data-state="hidden"],
    [data-reveal][data-state="shown"] {
      opacity: 1;
      transform: none;
      filter: none;
      transition: none;
    }
  }

  .blog-content {
    color: var(--app-text-color);
  }
  .blog-content h1,
  .blog-content h2,
  .blog-content h3 {
    @apply mt-8;
    color: var(--app-heading-color);
  }
  .blog-content h2 {
    @apply text-xl font-semibold;
  }
  .blog-content h3 {
    @apply text-lg font-semibold;
  }
  .blog-content p {
    @apply mt-4 leading-relaxed;
  }
  .blog-content a {
    @apply inline-block font-semibold underline decoration-zinc-300 underline-offset-4 transition-transform hover:-translate-y-0.5 dark:decoration-zinc-700;
  }
  .blog-content ul {
    @apply mt-4 list-disc pl-6;
  }
  .blog-content ol {
    @apply mt-4 list-decimal pl-6;
  }
  .blog-content li {
    @apply mt-2;
  }
  .blog-content code {
    @apply rounded bg-zinc-100 px-1.5 py-0.5 text-[0.95em] text-zinc-900 dark:bg-zinc-900 dark:text-zinc-50;
  }
  .blog-content pre {
    @apply mt-4 overflow-x-auto rounded-2xl border border-zinc-200 bg-zinc-50 p-4 text-sm dark:border-zinc-800 dark:bg-zinc-950;
  }
  .blog-content pre code {
    @apply bg-transparent p-0;
  }
  .blog-content blockquote {
    @apply mt-4 border-l-2 border-zinc-200 pl-4 dark:border-zinc-800;
    color: var(--app-text-color);
  }
}

@layer utilities {
  .app-card {
    transition-property: background-color, border-color, box-shadow, transform;
    transition-duration: 220ms;
    transition-timing-function: cubic-bezier(0.2, 0.8, 0.2, 1);
  }
}
